# ADHDTime 개발 플랜 (MVP 실행안)

문서 버전: v2.0  
작성일: 2026-02-27  
기준 문서: `docs/PRD.md` v3.0, `docs/USECASE.md` v2.0

---

## 1. 목표

4주 안에 MVP(P0) 코어 루프를 릴리즈 게이트 통과 수준으로 배포 가능 상태까지 완성한다.

코어 루프:

1. 입력
2. 청킹
3. 타이머 실행
4. 보상
5. 복귀(재등록/재청킹)

---

## 2. 고정 전제

- 플랫폼: Next.js(App Router) 기반 모바일 우선 웹앱
- 저장: 로컬 우선(IndexedDB/LocalStorage)
- AI: 로컬 패턴 우선 + AI 폴백
- 알림(STT 포함): P1
- 범위 원칙: P0 외 요구사항은 백로그로 이관

---

## 3. 우선순위 정책

- P0 must: FR-01 ~ FR-09
- P1 later: FR-10(알림), STT, 외부 동기화/구독
- 원칙: 릴리즈 게이트와 직접 연결된 항목을 먼저 구현

---

## 4. 4주 로드맵

### Week 1 - 입력/청킹 세로 슬라이스

- 홈 IA 정리(상태 카드/입력/퀘스트 리스트)
- 텍스트 입력 플로우 구현
- 로컬 청킹 룰셋 + 스키마 validator 구현
- AI 폴백 어댑터 연결(실제 호출 또는 모킹)
- UC-01 기준 10초/3탭 측정 훅 추가

### Week 2 - 타이머/햅틱 세로 슬라이스

- 타이머 상태 머신 구현(`running/paused/ended`)
- 시작/일시정지/재개/완료 UI/동작 연결
- 완료 후 다음 청크 자동 포커스
- 백그라운드 복귀 재계산 정책 적용
- 5분 햅틱 + 설정 토글

### Week 3 - 보상/리포트/복귀 세로 슬라이스

- XP/레벨/5스탯 산식 구현
- 완료/복귀 이벤트 기반 보상 반영
- 스탯(리포트) 화면 구현(완료 수/완료율/스탯 변화)
- 복귀 루프 기본(재등록/재청킹) 구현
- 복귀 동선 2탭 이내 검증

### Week 4 - 안전/계측/QA/릴리즈

- 이벤트 택소노미 누락 점검 및 보강
- KPI 계산 파이프라인(Activation/Time to Start/Recovery/D1/D7)
- 위험 입력 차단, rawInput 장기 저장 방지 검증
- 수동 E2E + 자동화 스모크 테스트 마무리
- 릴리즈 게이트 점검 및 배포 준비

---

## 5. 에픽/티켓 백로그

## Epic A. 홈/입력/청킹 (P0)

1. A-01 홈 IA 레이아웃 리팩터링
2. A-02 상태 카드(레벨/달성도/스탯) UI
3. A-03 입력 바(텍스트 중심, 음성은 비활성 슬롯)
4. A-04 로컬 청킹 룰셋(JSON)
5. A-05 청킹 결과 스키마 validator
6. A-06 AI 폴백 어댑터
7. A-07 청크 리스트 + 현재 청크 강조

## Epic B. 타이머/실행/햅틱 (P0)

1. B-01 타이머 상태 머신
2. B-02 현재 청크 확장 카드 UI
3. B-03 시작/일시정지/재개/완료 액션
4. B-04 완료 후 다음 청크 자동 포커스
5. B-05 백그라운드 복귀 시 재계산 정책
6. B-06 5분 햅틱 스케줄러 + 설정 토글

## Epic C. 보상/스탯/리포트 (P0)

1. C-01 XP 계산 유틸 + 레벨업 규칙
2. C-02 5스탯 산식 반영
3. C-03 보상 피드백 UI
4. C-04 스탯(리포트) 화면 카드 구성
5. C-05 이벤트 기반 스탯 동기화

## Epic D. 복귀 루프 (P0)

1. D-01 미완료/중단 상태 전이 설계(`abandoned`, `archived`)
2. D-02 재등록 CTA + `rescheduledFor` 처리
3. D-03 재청킹 동선 + `parentChunkId` 연결
4. D-04 복귀 행동 보상(회복력/분해력) 반영
5. D-05 비난형 카피 제거 점검

## Epic E. 계측/안전/프라이버시 (P0)

1. E-01 이벤트 택소노미 구현(`task_created` 등 필수 이벤트)
2. E-02 KPI 계산 로직(Activation/Time to Start/Recovery/D1/D7)
3. E-03 위험 입력 차단 처리 + `safety_blocked` 이벤트
4. E-04 rawInput 장기 저장 방지(요약 저장 정책)
5. E-05 릴리즈 게이트 체크 스크립트(가능 범위 자동화)

## Epic F. QA/릴리즈 (P0)

1. F-01 수동 시나리오 체크리스트 실행
2. F-02 도메인 유틸 테스트(청킹/타이머/XP)
3. F-03 컴포넌트 테스트(현재 청크 카드/복귀 CTA)
4. F-04 E2E 스모크(입력->완료->복귀)
5. F-05 릴리즈 노트 초안/배포 체크

---

## 6. 테스트 전략

### 6.1 수동 필수 시나리오

1. 과업 입력 -> 청킹 생성(10초 이내)
2. 첫 청크 시작(3탭 이내, 3분 이내)
3. 타이머 일시정지/재개/완료 및 다음 청크 전환
4. 5분 햅틱 ON/OFF 확인
5. 미완료 -> 재등록/재청킹(2탭 이내)
6. 보상/스탯/리포트 즉시 반영
7. 위험 입력 차단 및 안내 문구

### 6.2 자동화 우선순위

1. 도메인 테스트: 청킹 스키마, 타이머 상태 전이, XP 계산, 복귀 상태 전이
2. UI 테스트: 현재 청크 카드, 복귀 CTA, 설정 토글
3. E2E 스모크: 핵심 루프 + 복귀 루프

---

## 7. 릴리즈 게이트 체크리스트 (MVP)

1. 청킹 결과 10초 이내 표시
2. 첫 청크 시작 3탭 이내 / 3분 이내
3. 타이머 상태 꼬임 0건
4. 햅틱 ON/OFF 정상
5. 보상 및 상태 카드 즉시 반영
6. 복귀 동선(재등록/재청킹) 2탭 이내
7. 필수 이벤트 누락 없음
8. rawInput 장기 저장 없음
9. 위험 입력 차단 동작

---

## 8. 리스크와 대응

1. 타이머 정확도/상태 꼬임
- 대응: 상태 머신 단일화, 복귀 시각 기준 재계산, 전이 테스트 강화

2. AI 지연/비용
- 대응: 로컬 우선, 호출 상한, 실패 시 템플릿 폴백

3. 범위 팽창
- 대응: P0 freeze, P1 백로그 분리, 주간 범위 점검

4. 안전/프라이버시 누락
- 대응: E-03/E-04를 게이트 필수 항목으로 고정

---

## 9. DoD (MVP 완료 정의)

1. FR-01 ~ FR-09가 동작한다.
2. 릴리즈 게이트 9개 항목을 통과한다.
3. 치명 버그(타이머 꼬임, 데이터 손실, 시작 불가)가 없다.
4. 온보딩 첫 시나리오를 15분 내 완료 가능하다.
5. KPI 계산에 필요한 이벤트가 누락 없이 수집된다.

---

## 10. P1 백로그 (명시적 제외)

- FR-10 알림
- 음성 입력(STT)
- 외부 동기화
- 구독 게이트
