description = "구조화된 작업 분해를 포함한 포괄적 전략 계획 생성"

prompt = """
당신은 최고 수준의 전략 기획 전문가입니다. 다음에 대한 포괄적이고 실행 가능한 계획을 작성하세요: {{args}}

## 지침

1. **요청을 분석**하고 필요한 계획 범위를 결정합니다
2. **코드베이스의 관련 파일을 검토**하여 현재 상태를 파악합니다
3. 다음을 포함하는 **구조화된 계획**을 작성합니다:
   - 요약(Executive Summary)
   - 현 상태 분석(Current State Analysis)
   - 목표 상태 제안(Proposed Future State)
   - 구현 단계(섹션으로 분해)
   - 상세 작업(명확한 수용 기준을 가진 실행 항목)
   - 리스크 평가 및 완화 전략
   - 성공 지표
   - 필요 리소스 및 의존성
   - 일정 추정

4. **작업 분해 구조(Task Breakdown Structure)**:
   - 각 주요 섹션은 하나의 단계(phase) 또는 컴포넌트를 나타냅니다
   - 섹션 내 작업을 번호 매기고 우선순위를 정합니다
   - 각 작업에 명확한 수용 기준(acceptance criteria)을 포함합니다
   - 작업 간 의존성을 명시합니다
   - 노력 수준을 추정합니다(S/M/L/XL)

5. **작업 관리 구조를 생성**합니다:
   - 디렉터리 생성: `dev/active/[task-name]/` (프로젝트 루트 기준 상대 경로)
   - 파일 3개 생성:
     - `[task-name]-plan.md` - 포괄적 계획
     - `[task-name]-context.md` - 핵심 파일, 결정 사항, 의존성
     - `[task-name]-tasks.md` - 진행 상황 추적을 위한 체크리스트 형식
   - 각 파일에 `"Last Updated: YYYY-MM-DD"`를 포함합니다

6. **사이드 플랜 트랙 규칙(해당 시 필수)**:
   - 생성 기준: 메인 트랙 외에 별도 우선순위로 병행할 요구사항이면 사이드 플랜으로 분리합니다.
   - 명명 규칙: `task-[핵심주제]-side-plan` 형식의 kebab-case를 사용합니다.
   - 파일명 규칙: 디렉터리명과 동일한 접두어를 사용해 `-plan/-context/-tasks` 3파일을 맞춥니다.
   - 우선순위 규칙: `P0(실행 차단/핵심 UX)`, `P1(핵심 가치 개선)`, `P2(후속 개선)`로 분류하고 근거를 명시합니다.

7. **문서 우선 실행 규칙(필수)**:
   - 구현 전에 먼저 문서를 업데이트합니다.
   - 최소 선행 조건:
     - 기능별 Acceptance Criteria 확정
     - 기능별 리스크/테스트 시나리오/완료 기준 명시
     - `tasks.md`를 phase 단위 체크박스로 초기화
   - 문서가 최신 상태가 아니면 구현을 진행하지 않습니다.

## 품질 기준
- 계획은 필요한 모든 컨텍스트를 포함해 자체 완결적이어야 합니다
- 명확하고 실행 가능한 표현을 사용합니다
- 필요한 경우 구체적인 기술적 디테일을 포함합니다
- 기술적 관점과 비즈니스 관점을 모두 고려합니다
- 잠재적 리스크와 엣지 케이스를 반영합니다
- 사이드 플랜은 우선순위 근거와 문서 선행 상태를 명확히 포함해야 합니다

## 컨텍스트 참고 자료
- 아키텍처 개요는 `PROJECT_KNOWLEDGE.md`를 확인합니다(존재하는 경우)
- 코딩 표준은 `BEST_PRACTICES.md`를 참고합니다(존재하는 경우)
- 피해야 할 흔한 이슈는 `TROUBLESHOOTING.md`를 참조합니다(존재하는 경우)
- 작업 관리 가이드는 `dev/README.md`를 사용합니다(존재하는 경우)

**참고**: 이 명령은 해야 할 일이 명확해진 뒤, 플랜 모드(plan mode)를 종료한 후에 사용하는 것이 이상적입니다. 컨텍스트 리셋 이후에도 유지되는 영속적인 작업 구조를 생성합니다.
"""
